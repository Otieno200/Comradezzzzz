<!DOCTYPE html>
<html>
<head>
  <title>Post Item</title>
  <script src="https://www.gstatic.com/firebasejs/11.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.8.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.8.0/firebase-auth-compat.js"></script>
</head>
<body>
  <h2>Post Your Item</h2>

  <input type="text" id="productName" placeholder="Product Name"><br><br>
  <select id="category">
    <option>Foodstuff</option>
    <option>Jewelry</option>
    <option>Stationeries</option>
    <option>Electronics</option>
    <option>Clothes</option>
  </select><br><br>

  <input type="file" id="image"><br><br>
  <input type="text" id="price" placeholder="Price"><br><br>
  <input type="text" id="condition" placeholder="Condition"><br><br>
  <input type="text" id="location" placeholder="Location"><br><br>
  <input type="text" id="phone" placeholder="Phone Number"><br><br>
  <button onclick="uploadPost()">Upload</button>

  <p id="status"></p>

  <script>const firebaseConfig = {
      apiKey: "AIzaSyAWRiXi41JFAxT8CaJEmnhfThRNVuJ7rSo",
      authDomain: "comrade-bazaar.firebaseapp.com",
      databaseURL: "https://comrade-bazaar-default-rtdb.firebaseio.com",
      projectId: "comrade-bazaar",
      storageBucket: "comrade-bazaar.appspot.com",
      messagingSenderId: "969365595474",
      appId: "1:969365595474:web:2a24d3dbc079c45ca2c68b",
      measurementId: "G-KTHM5XKHEX"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    function uploadPost() {
      const name = document.getElementById('productName').value;
      const category = document.getElementById('category').value;
      const price = document.getElementById('price').value;
      const condition = document.getElementById('condition').value;
      const location = document.getElementById('location').value;
      const phone = document.getElementById('phone').value;
      const image = document.getElementById('image').files[0];
      const status = document.getElementById('status');

      const user = auth.currentUser;

      if (user) {
        const postRef = db.ref('products/' + user.uid).push();
        postRef.set({
          category,
          price,
          condition,
          location,
          phone
        }).then(() => {
          document.getElementById('status').innerText = "Post uploaded!";
        }).catch((error) => {document.getElementById('status').innerText = "Error: " + error.message;
        });
      } else {
        alert("You must be logged in to post!");
      }
    }
  </script>
  <br><br>
<button onclick="goToDashboard()">Exit to Dashboard</button>

<script>
  function goToDashboard() {
    window.location.href = "dashboard.html";
  }
</script>
</body>
    </html>
